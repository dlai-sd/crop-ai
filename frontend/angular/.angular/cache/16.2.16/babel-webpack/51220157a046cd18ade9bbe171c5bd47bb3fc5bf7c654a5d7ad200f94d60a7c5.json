{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nexport let DashboardComponent = class DashboardComponent {\n  constructor(cropAIService) {\n    this.cropAIService = cropAIService;\n    this.health = {};\n    this.metrics = {};\n    this.predictions = {\n      predictions: []\n    };\n    this.stats = {};\n  }\n  ngOnInit() {\n    this.loadData();\n    // Refresh every 10 seconds\n    setInterval(() => this.loadData(), 10000);\n  }\n  loadData() {\n    this.cropAIService.getHealth().subscribe({\n      next: data => {\n        this.health = data;\n      },\n      error: err => console.error('Health error:', err)\n    });\n    this.cropAIService.getMetrics().subscribe({\n      next: data => {\n        this.metrics = data;\n      },\n      error: err => console.error('Metrics error:', err)\n    });\n    this.cropAIService.getPredictions(50).subscribe({\n      next: data => {\n        this.predictions = data;\n      },\n      error: err => console.error('Predictions error:', err)\n    });\n    this.cropAIService.getStats().subscribe({\n      next: data => {\n        this.stats = data;\n      },\n      error: err => console.error('Stats error:', err)\n    });\n  }\n  formatUptime(seconds) {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor(seconds % 3600 / 60);\n    return `${hours}h ${minutes}m`;\n  }\n  getConfidenceClass(confidence) {\n    if (confidence >= 0.9) return 'badge-success';\n    if (confidence >= 0.7) return 'badge-info';\n    return 'badge-warning';\n  }\n};\nDashboardComponent = __decorate([Component({\n  selector: 'app-dashboard',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <div class=\"container-fluid\">\n      <h2 class=\"mb-4\">üìä Dashboard</h2>\n\n      <!-- Stats Row -->\n      <div class=\"row mb-4\">\n        <div class=\"col-md-3\">\n          <div class=\"card stat-card\">\n            <div class=\"card-body\">\n              <h6 class=\"card-title\">Total Predictions</h6>\n              <h3>{{ health?.inference_count || 0 }}</h3>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-3\">\n          <div class=\"card stat-card\">\n            <div class=\"card-body\">\n              <h6 class=\"card-title\">Service Status</h6>\n              <span [class]=\"'badge badge-' + (health?.status === 'healthy' ? 'success' : 'warning')\">\n                {{ health?.status | uppercase }}\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-3\">\n          <div class=\"card stat-card\">\n            <div class=\"card-body\">\n              <h6 class=\"card-title\">Uptime</h6>\n              <h5>{{ formatUptime(health?.uptime_seconds || 0) }}</h5>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-3\">\n          <div class=\"card stat-card\">\n            <div class=\"card-body\">\n              <h6 class=\"card-title\">System Health</h6>\n              <span class=\"badge badge-info\">{{ metrics?.overall_status | uppercase }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- System Info Row -->\n      <div class=\"row mb-4\">\n        <div class=\"col-md-6\">\n          <div class=\"card\">\n            <div class=\"card-header\">\n              <h5 class=\"mb-0\">üíª System Resources</h5>\n            </div>\n            <div class=\"card-body\">\n              <div class=\"mb-3\">\n                <label>CPU Usage: {{ metrics?.system?.cpu_percent || 0 | number:'1.1-1' }}%</label>\n                <div class=\"progress\">\n                  <div \n                    class=\"progress-bar\" \n                    [style.width.%]=\"metrics?.system?.cpu_percent || 0\"\n                  ></div>\n                </div>\n              </div>\n              <div>\n                <label>Memory Usage: {{ metrics?.system?.memory_percent || 0 | number:'1.1-1' }}%</label>\n                <div class=\"progress\">\n                  <div \n                    class=\"progress-bar bg-warning\" \n                    [style.width.%]=\"metrics?.system?.memory_percent || 0\"\n                  ></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"col-md-6\">\n          <div class=\"card\">\n            <div class=\"card-header\">\n              <h5 class=\"mb-0\">üîß Service Info</h5>\n            </div>\n            <div class=\"card-body\">\n              <p><strong>Model Ready:</strong> \n                <span [class]=\"'badge badge-' + (metrics?.model?.initialized ? 'success' : 'danger')\">\n                  {{ metrics?.model?.initialized ? 'Yes' : 'No' }}\n                </span>\n              </p>\n              <p><strong>CPU OK:</strong> \n                <span [class]=\"'badge badge-' + (metrics?.system?.cpu_ok ? 'success' : 'danger')\">\n                  {{ metrics?.system?.cpu_ok ? 'Yes' : 'No' }}\n                </span>\n              </p>\n              <p><strong>Memory OK:</strong> \n                <span [class]=\"'badge badge-' + (metrics?.system?.memory_ok ? 'success' : 'danger')\">\n                  {{ metrics?.system?.memory_ok ? 'Yes' : 'No' }}\n                </span>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Predictions History -->\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <div class=\"card\">\n            <div class=\"card-header\">\n              <h5 class=\"mb-0\">üìù Recent Predictions</h5>\n            </div>\n            <div class=\"card-body\">\n              <div *ngIf=\"!predictions?.predictions || predictions.predictions.length === 0\" class=\"alert alert-info\">\n                No predictions yet\n              </div>\n              <div class=\"table-responsive\" *ngIf=\"predictions?.predictions && predictions.predictions.length > 0\">\n                <table class=\"table table-hover\">\n                  <thead class=\"table-light\">\n                    <tr>\n                      <th>Crop Type</th>\n                      <th>Confidence</th>\n                      <th>Model Version</th>\n                      <th>Timestamp</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr *ngFor=\"let pred of predictions.predictions | slice:0:10\">\n                      <td>\n                        <span class=\"badge badge-primary\">{{ (pred as any).crop_type }}</span>\n                      </td>\n                      <td>\n                        <span class=\"badge\" [class]=\"getConfidenceClass((pred as any).confidence)\">\n                          {{ ((pred as any).confidence * 100).toFixed(0) }}%\n                        </span>\n                      </td>\n                      <td>{{ (pred as any).model_version }}</td>\n                      <td>{{ (pred as any).timestamp | date:'short' }}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .stat-card {\n      border: none;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n      transition: transform 0.2s;\n    }\n\n    .stat-card:hover {\n      transform: translateY(-4px);\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n    }\n\n    .card {\n      border: none;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n      margin-bottom: 20px;\n    }\n\n    .card-header {\n      background-color: #f8f9fa;\n      border-bottom: 2px solid #e9ecef;\n      padding: 15px;\n    }\n\n    .badge-primary { background-color: #007bff; }\n    .badge-success { background-color: #28a745; }\n    .badge-warning { background-color: #ffc107; }\n    .badge-danger { background-color: #dc3545; }\n    .badge-info { background-color: #17a2b8; }\n  `]\n})], DashboardComponent);","map":{"version":3,"names":["Component","CommonModule","DashboardComponent","constructor","cropAIService","health","metrics","predictions","stats","ngOnInit","loadData","setInterval","getHealth","subscribe","next","data","error","err","console","getMetrics","getPredictions","getStats","formatUptime","seconds","hours","Math","floor","minutes","getConfidenceClass","confidence","__decorate","selector","standalone","imports","template","styles"],"sources":["/workspaces/crop-ai/frontend/angular/src/components/dashboard.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CropAIService } from '../services/crop-ai.service';\n\n@Component({\n  selector: 'app-dashboard',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <div class=\"container-fluid\">\n      <h2 class=\"mb-4\">üìä Dashboard</h2>\n\n      <!-- Stats Row -->\n      <div class=\"row mb-4\">\n        <div class=\"col-md-3\">\n          <div class=\"card stat-card\">\n            <div class=\"card-body\">\n              <h6 class=\"card-title\">Total Predictions</h6>\n              <h3>{{ health?.inference_count || 0 }}</h3>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-3\">\n          <div class=\"card stat-card\">\n            <div class=\"card-body\">\n              <h6 class=\"card-title\">Service Status</h6>\n              <span [class]=\"'badge badge-' + (health?.status === 'healthy' ? 'success' : 'warning')\">\n                {{ health?.status | uppercase }}\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-3\">\n          <div class=\"card stat-card\">\n            <div class=\"card-body\">\n              <h6 class=\"card-title\">Uptime</h6>\n              <h5>{{ formatUptime(health?.uptime_seconds || 0) }}</h5>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-3\">\n          <div class=\"card stat-card\">\n            <div class=\"card-body\">\n              <h6 class=\"card-title\">System Health</h6>\n              <span class=\"badge badge-info\">{{ metrics?.overall_status | uppercase }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- System Info Row -->\n      <div class=\"row mb-4\">\n        <div class=\"col-md-6\">\n          <div class=\"card\">\n            <div class=\"card-header\">\n              <h5 class=\"mb-0\">üíª System Resources</h5>\n            </div>\n            <div class=\"card-body\">\n              <div class=\"mb-3\">\n                <label>CPU Usage: {{ metrics?.system?.cpu_percent || 0 | number:'1.1-1' }}%</label>\n                <div class=\"progress\">\n                  <div \n                    class=\"progress-bar\" \n                    [style.width.%]=\"metrics?.system?.cpu_percent || 0\"\n                  ></div>\n                </div>\n              </div>\n              <div>\n                <label>Memory Usage: {{ metrics?.system?.memory_percent || 0 | number:'1.1-1' }}%</label>\n                <div class=\"progress\">\n                  <div \n                    class=\"progress-bar bg-warning\" \n                    [style.width.%]=\"metrics?.system?.memory_percent || 0\"\n                  ></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"col-md-6\">\n          <div class=\"card\">\n            <div class=\"card-header\">\n              <h5 class=\"mb-0\">üîß Service Info</h5>\n            </div>\n            <div class=\"card-body\">\n              <p><strong>Model Ready:</strong> \n                <span [class]=\"'badge badge-' + (metrics?.model?.initialized ? 'success' : 'danger')\">\n                  {{ metrics?.model?.initialized ? 'Yes' : 'No' }}\n                </span>\n              </p>\n              <p><strong>CPU OK:</strong> \n                <span [class]=\"'badge badge-' + (metrics?.system?.cpu_ok ? 'success' : 'danger')\">\n                  {{ metrics?.system?.cpu_ok ? 'Yes' : 'No' }}\n                </span>\n              </p>\n              <p><strong>Memory OK:</strong> \n                <span [class]=\"'badge badge-' + (metrics?.system?.memory_ok ? 'success' : 'danger')\">\n                  {{ metrics?.system?.memory_ok ? 'Yes' : 'No' }}\n                </span>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Predictions History -->\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <div class=\"card\">\n            <div class=\"card-header\">\n              <h5 class=\"mb-0\">üìù Recent Predictions</h5>\n            </div>\n            <div class=\"card-body\">\n              <div *ngIf=\"!predictions?.predictions || predictions.predictions.length === 0\" class=\"alert alert-info\">\n                No predictions yet\n              </div>\n              <div class=\"table-responsive\" *ngIf=\"predictions?.predictions && predictions.predictions.length > 0\">\n                <table class=\"table table-hover\">\n                  <thead class=\"table-light\">\n                    <tr>\n                      <th>Crop Type</th>\n                      <th>Confidence</th>\n                      <th>Model Version</th>\n                      <th>Timestamp</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr *ngFor=\"let pred of predictions.predictions | slice:0:10\">\n                      <td>\n                        <span class=\"badge badge-primary\">{{ (pred as any).crop_type }}</span>\n                      </td>\n                      <td>\n                        <span class=\"badge\" [class]=\"getConfidenceClass((pred as any).confidence)\">\n                          {{ ((pred as any).confidence * 100).toFixed(0) }}%\n                        </span>\n                      </td>\n                      <td>{{ (pred as any).model_version }}</td>\n                      <td>{{ (pred as any).timestamp | date:'short' }}</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .stat-card {\n      border: none;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n      transition: transform 0.2s;\n    }\n\n    .stat-card:hover {\n      transform: translateY(-4px);\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n    }\n\n    .card {\n      border: none;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n      margin-bottom: 20px;\n    }\n\n    .card-header {\n      background-color: #f8f9fa;\n      border-bottom: 2px solid #e9ecef;\n      padding: 15px;\n    }\n\n    .badge-primary { background-color: #007bff; }\n    .badge-success { background-color: #28a745; }\n    .badge-warning { background-color: #ffc107; }\n    .badge-danger { background-color: #dc3545; }\n    .badge-info { background-color: #17a2b8; }\n  `]\n})\nexport class DashboardComponent implements OnInit {\n  health: any = {};\n  metrics: any = {};\n  predictions: any = { predictions: [] };\n  stats: any = {};\n\n  constructor(private cropAIService: CropAIService) {}\n\n  ngOnInit(): void {\n    this.loadData();\n    // Refresh every 10 seconds\n    setInterval(() => this.loadData(), 10000);\n  }\n\n  loadData(): void {\n    this.cropAIService.getHealth().subscribe({\n      next: (data: any) => { this.health = data; },\n      error: (err: any) => console.error('Health error:', err)\n    });\n\n    this.cropAIService.getMetrics().subscribe({\n      next: (data: any) => { this.metrics = data; },\n      error: (err: any) => console.error('Metrics error:', err)\n    });\n\n    this.cropAIService.getPredictions(50).subscribe({\n      next: (data: any) => { this.predictions = data; },\n      error: (err: any) => console.error('Predictions error:', err)\n    });\n\n    this.cropAIService.getStats().subscribe({\n      next: (data: any) => { this.stats = data; },\n      error: (err: any) => console.error('Stats error:', err)\n    });\n  }\n\n  formatUptime(seconds: number): string {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    return `${hours}h ${minutes}m`;\n  }\n\n  getConfidenceClass(confidence: number): string {\n    if (confidence >= 0.9) return 'badge-success';\n    if (confidence >= 0.7) return 'badge-info';\n    return 'badge-warning';\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAASC,YAAY,QAAQ,iBAAiB;AAmLvC,WAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAM7BC,YAAoBC,aAA4B;IAA5B,KAAAA,aAAa,GAAbA,aAAa;IALjC,KAAAC,MAAM,GAAQ,EAAE;IAChB,KAAAC,OAAO,GAAQ,EAAE;IACjB,KAAAC,WAAW,GAAQ;MAAEA,WAAW,EAAE;IAAE,CAAE;IACtC,KAAAC,KAAK,GAAQ,EAAE;EAEoC;EAEnDC,QAAQA,CAAA;IACN,IAAI,CAACC,QAAQ,EAAE;IACf;IACAC,WAAW,CAAC,MAAM,IAAI,CAACD,QAAQ,EAAE,EAAE,KAAK,CAAC;EAC3C;EAEAA,QAAQA,CAAA;IACN,IAAI,CAACN,aAAa,CAACQ,SAAS,EAAE,CAACC,SAAS,CAAC;MACvCC,IAAI,EAAGC,IAAS,IAAI;QAAG,IAAI,CAACV,MAAM,GAAGU,IAAI;MAAE,CAAC;MAC5CC,KAAK,EAAGC,GAAQ,IAAKC,OAAO,CAACF,KAAK,CAAC,eAAe,EAAEC,GAAG;KACxD,CAAC;IAEF,IAAI,CAACb,aAAa,CAACe,UAAU,EAAE,CAACN,SAAS,CAAC;MACxCC,IAAI,EAAGC,IAAS,IAAI;QAAG,IAAI,CAACT,OAAO,GAAGS,IAAI;MAAE,CAAC;MAC7CC,KAAK,EAAGC,GAAQ,IAAKC,OAAO,CAACF,KAAK,CAAC,gBAAgB,EAAEC,GAAG;KACzD,CAAC;IAEF,IAAI,CAACb,aAAa,CAACgB,cAAc,CAAC,EAAE,CAAC,CAACP,SAAS,CAAC;MAC9CC,IAAI,EAAGC,IAAS,IAAI;QAAG,IAAI,CAACR,WAAW,GAAGQ,IAAI;MAAE,CAAC;MACjDC,KAAK,EAAGC,GAAQ,IAAKC,OAAO,CAACF,KAAK,CAAC,oBAAoB,EAAEC,GAAG;KAC7D,CAAC;IAEF,IAAI,CAACb,aAAa,CAACiB,QAAQ,EAAE,CAACR,SAAS,CAAC;MACtCC,IAAI,EAAGC,IAAS,IAAI;QAAG,IAAI,CAACP,KAAK,GAAGO,IAAI;MAAE,CAAC;MAC3CC,KAAK,EAAGC,GAAQ,IAAKC,OAAO,CAACF,KAAK,CAAC,cAAc,EAAEC,GAAG;KACvD,CAAC;EACJ;EAEAK,YAAYA,CAACC,OAAe;IAC1B,MAAMC,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,GAAG,IAAI,CAAC;IACxC,MAAMI,OAAO,GAAGF,IAAI,CAACC,KAAK,CAAEH,OAAO,GAAG,IAAI,GAAI,EAAE,CAAC;IACjD,OAAO,GAAGC,KAAK,KAAKG,OAAO,GAAG;EAChC;EAEAC,kBAAkBA,CAACC,UAAkB;IACnC,IAAIA,UAAU,IAAI,GAAG,EAAE,OAAO,eAAe;IAC7C,IAAIA,UAAU,IAAI,GAAG,EAAE,OAAO,YAAY;IAC1C,OAAO,eAAe;EACxB;CACD;AA/CY3B,kBAAkB,GAAA4B,UAAA,EAhL9B9B,SAAS,CAAC;EACT+B,QAAQ,EAAE,eAAe;EACzBC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAAChC,YAAY,CAAC;EACvBiC,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA4IT;EACDC,MAAM,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6BR;CACF,CAAC,C,EACWjC,kBAAkB,CA+C9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}